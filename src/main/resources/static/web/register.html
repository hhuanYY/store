<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!--edge浏览器H5兼容设置-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!--360浏览器H5兼容设置-->
		<meta name="renderer" content="webkit" />
		<title>消费电子产品推广-注册</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--导入核心文件-->
		<script src="../bootstrap3/js/holder.js"></script>
		<link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
		<script src="../bootstrap3/jquery-1.9.1.min.js"></script>
		<script src="../bootstrap3/js/bootstrap.js"></script>
		<!-- 字体图标 -->
		<link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css" />
		<link rel="stylesheet" type="text/css" href="../css/top.css" />
		<link rel="stylesheet" type="text/css" href="../css/index.css" />
		<link rel="stylesheet" type="text/css" href="../css/layout.css" />
		<link rel="stylesheet" type="text/css" href="../css/reg.css" />
		<link rel="stylesheet" type="text/css" href="../css/footer.css" />
	</head>
	<body>
		<!--头部-->
		<header class="header">
			<img src="../images/index/stumalllogo.png" alt="" />
			<span class="pull-right"><small>欢迎访问</small><b>消费电子产品推广网站</b></span>
		</header>
		<!--主体-->
		<div class="container mycontent text-left">
			<!--透明层 -->
			<div class="regDiv">
				<p>新用户注册</p>
				<!--表单开始-->
				<form   class="form-horizontal" role="form">
					<!--用户名-->
					<div class="form-group">
						<label  class="col-md-3 control-label">* 名字：</label>
						<div class="col-md-8">
							<input id="inp-username" type="text" class="form-control"  placeholder="请输入用户名">
						</div>
					</div>
					<!--密码-->
					<div class="form-group">
						<label class="col-md-3 control-label">* 密码：</label>
						<div class="col-md-8">
							<input id="inp-password" type="password" class="form-control"  placeholder="请输入密码">
						</div>
					</div>
					<!--确认密码-->
					<div class="form-group">
						<label  class="col-md-3 control-label">* 确认密码：</label>
						<div class="col-md-8">
							<input id="inp-password-2" type="password" class="form-control"  placeholder="请再次输入密码">
						</div>
					</div>
					<!--性别-->
					<div class="form-group">
						<label  class="col-md-3 control-label"> 性别：</label>
						<div class="col-md-8">
							<input type="radio" name="gender" value="1" checked="checked">&nbsp;男 &nbsp;&nbsp;
							<input type="radio" name="gender" value="0">&nbsp;女
						</div>
					</div>
					<!--手机号码-->
					<div class="form-group">
						<label  class="col-md-3 control-label"> 手机号码：</label>
						<div class="col-md-8">
							<input id="inp-phone" type="text" class="form-control"  placeholder="请输入手机号码">
						</div>
					</div>
					<!--电子邮箱-->
					<div class="form-group">
						<label  class="col-md-3 control-label"> 电子邮箱：</label>
						<div class="col-md-8">
							<input id="inp-email" type="text" class="form-control"  placeholder="请输入电子邮箱">
						</div>
					</div>
					<!--提交按钮-->
					<div class="form-group">
						<label class="col-md-3 control-label"></label>
						<div class="col-md-8">
							<input id="btn-reg" class="btn btn-primary" type="button" value="立即注册" />
							<span class="pull-right"><small>已经有账号？</small><a href="login.html">登录</a></span>
						</div>
					</div>
				</form>
			</div>
		</div>
		<!--页脚开始-->
		<footer class="footer">
			<!-- 品质保障，私人定制等-->
			<div class="text-center rights container">
<!--				<div class="col-md-offset-2 col-md-2">-->
<!--					<span class="fa fa-thumbs-o-up"></span>-->
<!--					<p>品质保障</p>-->
<!--				</div>-->
<!--				<div class="col-md-2">-->
<!--					<span class="fa fa-address-card-o"></span>-->
<!--					<p>私人订制</p>-->
<!--				</div>-->
<!--				<div class="col-md-2">-->
<!--					<span class="fa fa-graduation-cap"></span>-->
<!--					<p>品牌特供</p>-->
<!--				</div>-->
<!--				<div class="col-md-2">-->
<!--					<span class="fa fa-bitcoin"></span>-->
<!--					<p>专属特权</p>-->
<!--				</div>-->
			</div>
			<!--联系我们、下载客户端等-->

		</footer>
		<!--页脚结束-->
	<script type="text/javascript">
	// 为id值为btn-reg的页面元素（本次是按钮）绑定单击事件，调用的click()的参数是另一个函数
	// 第41行，第48行，第55行，第??行(84:立即注册按钮)：添加id
	$("#btn-reg").click(function() {
		// 获取用户输入的数据
		let username = $("#inp-username").val();
		let password = $("#inp-password").val();
		let password2 = $("#inp-password-2").val();
		let phone = $("#inp-phone").val();
		let email = $("#inp-email").val();
		let gender = $("input[name='gender']:checked").val();
		
		// 检查提交的参数的有效性
		let usernameRegex = /^[a-zA-Z0-9_]{4,16}$/;
		if (!usernameRegex.test(username)) {
			alert("注册失败！用户名格式错误！");
			return;
		}
		if (password.length < 4) {
			alert("注册失败！密码格式错误！");
			return;
		}
		if (password != password2) {
			alert("注册失败！两次输入的密码不一致！");
			return;
		}
		
		// alert("准备提交注册……");
		// 相对路径的参考方式
		// 当前位置：http://localhost:8080/web/register.html
		// 目标位置：http://localhost:8080/users/reg
		// 推荐使用绝对路径，绝对路径是以访问当前项目时，从端口号的右侧开始的路径，无视当前位置在哪里
		$.ajax({
			"url":"/users/reg",
			"data":{
				"username":username,
				"password":password,
				"phone":phone,
				"email":email,
				"gender":gender
			},
			"type":"post",
			"dataType":"json",
			"success":function(json) {
				if (json.state == "2000") {
					alert("注册成功！");
					window.location.href="/web/login.html";
				} else {
					alert(json.message);
				}
			}
		});
	});
	</script>
	</body>

</html>







